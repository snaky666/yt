<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Register — NovaAcademy</title>
  <link rel="stylesheet" href="../assets/css/style.css">
</head>
<body>
  <button class="menu-toggle" aria-label="Open menu">☰</button>
  
  <aside class="sidebar" aria-hidden="true">
    <div class="group">
      <img src="../images/logo.svg" alt="Logo" style="width:54px;height:54px;margin-bottom:10px">
      <div style="font-weight:700;margin-bottom:6px" data-i18n="siteName">NovaAcademy</div>
      <div style="font-size:13px;color:var(--gray)" data-i18n="tagline">Professional Learning Platform</div>
    </div>
    <div class="group">
      <a href="../index.html">🏠 <span data-i18n="home">Home</span></a>
      <a href="courses.html">📚 <span data-i18n="courses">Courses</span></a>
      <a href="library.html">📖 <span data-i18n="library">Library</span></a>
      <a href="login.html">🔑 <span data-i18n="login">Login</span></a>
      <a href="register.html">📝 <span data-i18n="register">Register</span></a>
    </div>
    <div class="lang-selector" style="margin-top:auto;padding:10px 0">
      <select id="lang-select-sidebar" style="width:100%;padding:8px;border-radius:var(--radius-md);border:1px solid var(--gray-light);background:var(--white);color:var(--dark)">
        <option value="en">English</option>
        <option value="ar">العربية</option>
        <option value="es">Español</option>
        <option value="fr">Français</option>
        <option value="de">Deutsch</option>
        <option value="zh">中文</option>
        <option value="ja">日本語</option>
        <option value="ru">Русский</option>
        <option value="pt">Português</option>
        <option value="it">Italiano</option>
      </select>
    </div>
    <div style="margin-top:10px;color:var(--gray);font-size:13px" data-i18n="copyright">© 2025 NovaAcademy</div>
  </aside>

  <div class="overlay"></div>

  <header>
    <div class="container header">
      <div class="brand">
        <img src="../images/logo.svg" alt="NovaAcademy Logo">
        <span data-i18n="siteName">NovaAcademy</span>
      </div>
      <nav class="nav">
        <a href="../index.html" data-i18n="home">Home</a>
        <a href="courses.html" data-i18n="courses">Courses</a>
        <a href="library.html" data-i18n="library">Library</a>
        <a href="login.html" data-i18n="login">Login</a>
        <a href="register.html" data-i18n="register">Register</a>
      </nav>
      <div class="nav-actions">
        <select id="lang-select-header" style="padding:8px 12px;border-radius:var(--radius-md);border:1px solid var(--gray-light);background:var(--white);color:var(--dark);margin-right:10px">
          <option value="en">EN</option>
          <option value="ar">AR</option>
          <option value="es">ES</option>
          <option value="fr">FR</option>
          <option value="de">DE</option>
          <option value="zh">ZH</option>
          <option value="ja">JA</option>
          <option value="ru">RU</option>
          <option value="pt">PT</option>
          <option value="it">IT</option>
        </select>
        <a href="login.html" class="btn btn-white" data-i18n="login">Login</a>
      </div>
    </div>
  </header>

  <main class="container">
    <div class="formbox fade-in">
      <h1 class="text-center">Create Account</h1>
      <p class="text-center text-muted mb-3">Join thousands of learners on NovaAcademy</p>
      
      <form class="demo">
        <div class="form-group">
          <label class="form-label" for="fullname">Full Name</label>
          <input class="input" type="text" id="fullname" placeholder="Enter your full name" required>
        </div>
        
        <div class="form-group">
          <label class="form-label" for="email">Email Address</label>
          <input class="input" type="email" id="email" placeholder="Enter your email" required>
        </div>
        
        <div class="form-group">
          <label class="form-label" for="password">Password</label>
          <input class="input" type="password" id="password" placeholder="Create a password" required>
          <p style="font-size:0.75rem;color:var(--gray);margin-top:0.25rem">Must be at least 8 characters</p>
        </div>
        
        <div class="form-group">
          <label class="form-label" for="confirm-password">Confirm Password</label>
          <input class="input" type="password" id="confirm-password" placeholder="Confirm your password" required>
        </div>
        
        <div class="form-group">
          <div class="checkbox-group">
            <input type="checkbox" id="terms" class="checkbox" required>
            <label for="terms" style="font-size:0.875rem">
              I agree to the <a href="#" style="color:var(--primary)">Terms & Conditions</a> and <a href="#" style="color:var(--primary)">Privacy Policy</a>
            </label>
          </div>
        </div>
        
        <div class="form-group">
          <div class="checkbox-group">
            <input type="checkbox" id="newsletter" class="checkbox">
            <label for="newsletter" style="font-size:0.875rem">
              Send me updates about courses and learning resources
            </label>
          </div>
        </div>
        
        <button type="submit" class="btn btn-primary" style="width:100%;margin-top:1rem" data-i18n="signUp">Sign Up</button>
      </form>
      
      <p class="text-center mt-3">
        Already have an account? <a href="login.html" style="color:var(--primary);font-weight:600" data-i18n="login">Login</a>
      </p>
    </div>
  </main>

  <footer class="footer">
    <div class="container">
      <div class="footer-bottom" data-i18n="copyright">
        © 2025 NovaAcademy — Professional Learning Platform
      </div>
    </div>
  </footer>

  <script src="../assets/js/i18n.js"></script>
  <script src="../assets/js/script.js"></script>
  
  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
  <script src="../assets/js/firebase-config.js"></script>
  
  <script>
    // Email/Password Registration
    document.querySelector('form.demo').addEventListener('submit', async function(e) {
      e.preventDefault();
      const fullname = document.getElementById('fullname').value;
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;
      const confirmPassword = document.getElementById('confirm-password').value;
      const btn = this.querySelector('button[type=submit]');
      
      if (password !== confirmPassword) {
        alert('❌ كلمة المرور غير متطابقة');
        return;
      }
      
      if (password.length < 6) {
        alert('❌ كلمة المرور يجب أن تكون 6 أحرف على الأقل');
        return;
      }
      
      btn.disabled = true;
      btn.textContent = 'جاري التسجيل...';
      
      try {
        await signUpWithEmail(email, password, fullname);
        alert('✅ تم التسجيل بنجاح!');
        window.location.href = '../index.html';
      } catch (error) {
        let errorMsg = 'فشل التسجيل';
        if (error.code === 'auth/email-already-in-use') {
          errorMsg = 'البريد الإلكتروني مستخدم بالفعل';
        } else if (error.code === 'auth/invalid-email') {
          errorMsg = 'البريد الإلكتروني غير صحيح';
        } else if (error.code === 'auth/weak-password') {
          errorMsg = 'كلمة المرور ضعيفة جداً';
        }
        alert('❌ ' + errorMsg);
        btn.disabled = false;
        btn.textContent = 'Sign Up';
      }
    });
    
    // Add Google Sign In Button
    const form = document.querySelector('form.demo');
    const googleBtn = document.createElement('button');
    googleBtn.type = 'button';
    googleBtn.className = 'btn btn-outline';
    googleBtn.style.width = '100%';
    googleBtn.style.marginTop = '1rem';
    googleBtn.innerHTML = '🔐 التسجيل بواسطة Google';
    
    googleBtn.addEventListener('click', async function() {
      this.disabled = true;
      this.textContent = 'جاري التحميل...';
      
      try {
        await signInWithGoogle();
        alert('✅ تم التسجيل بنجاح!');
        window.location.href = '../index.html';
      } catch (error) {
        alert('❌ ' + (error.message || 'فشل التسجيل'));
        this.disabled = false;
        this.innerHTML = '🔐 التسجيل بواسطة Google';
      }
    });
    
    form.appendChild(googleBtn);
  </script>
</body>
</html>
